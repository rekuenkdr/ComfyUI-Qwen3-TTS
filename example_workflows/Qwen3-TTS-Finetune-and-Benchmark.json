{"id":"26b557c0-b6a1-4103-95fa-9674c47af988","revision":0,"last_node_id":28,"last_link_id":45,"nodes":[{"id":7,"type":"Qwen3DataPrep","pos":[397.2810904883545,313.3649147121094],"size":[270,180],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"jsonl_path","name":"jsonl_path","type":"STRING","widget":{"name":"jsonl_path"},"link":10},{"localized_name":"tokenizer_repo","name":"tokenizer_repo","type":"COMBO","widget":{"name":"tokenizer_repo"},"link":null},{"localized_name":"source","name":"source","type":"COMBO","widget":{"name":"source"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"processed_jsonl_path","name":"processed_jsonl_path","type":"STRING","links":[22]}],"properties":{"cnr_id":"comfyui-qwen3-tts","ver":"6289ee949a75455e9fe1f90ac6d5f51445f03c73","Node name for S&R":"Qwen3DataPrep","ue_properties":{"widget_ue_connectable":{"jsonl_path":true},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["","Qwen/Qwen3-TTS-Tokenizer-12Hz","HuggingFace",16]},{"id":16,"type":"MarkdownNote","pos":[389.7190988256193,539.0312923379558],"size":[270.438,182.45200000000006],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["| Parameter | 0.6B Model | 1.7B Model |                                                                                                                                            \n  |-----------|------------|------------|                                                                                                                                            \n  | lr | 1e-7 | 2e-6 |                                                                                                                                                               \n  | Epochs | 2 | 3 |                                                                                                                                                                 \n  | Batch size | 2 | 2 |                                                                                                                                                             \n  | Gradient accumulation | 4 | 1 |                                                                                                                                                  \n  | Samples | 1000 | 1000 |                                                           "],"color":"#432","bgcolor":"#653"},{"id":4,"type":"Qwen3Loader","pos":[1022.7867259428999,152.65981198483698],"size":[411.80834545454513,164.24869999999999],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"repo_id","name":"repo_id","type":"COMBO","widget":{"name":"repo_id"},"link":null},{"localized_name":"source","name":"source","type":"COMBO","widget":{"name":"source"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"local_model_path","name":"local_model_path","shape":7,"type":"STRING","widget":{"name":"local_model_path"},"link":27}],"outputs":[{"localized_name":"model","name":"model","type":"QWEN3_MODEL","links":[4]}],"properties":{"cnr_id":"comfyui-qwen3-tts","ver":"8692bfd8b930a7b5aca53754e63726e88ec94bd3","Node name for S&R":"Qwen3Loader","ue_properties":{"widget_ue_connectable":{"local_model_path":true},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["Qwen/Qwen3-TTS-12Hz-0.6B-CustomVoice","HuggingFace","bf16","auto",""]},{"id":9,"type":"PrimitiveString","pos":[398.12702957926336,163.43428380301867],"size":[268.1818181818182,98.90909090909099],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[10]}],"title":"json_path","properties":{"cnr_id":"comfy-core","ver":"0.10.0","Node name for S&R":"PrimitiveString","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"}},"widgets_values":["/home/rekuen/development/ComfyUI/datasets/qwen3tts_data_carlos/train_raw_1000.jsonl"]},{"id":5,"type":"Qwen3CustomVoice","pos":[1017.3092777610817,365.4577601666549],"size":[424.14416090909094,370.77054999999984],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"QWEN3_MODEL","link":4},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null},{"localized_name":"language","name":"language","type":"COMBO","widget":{"name":"language"},"link":null},{"localized_name":"speaker","name":"speaker","type":"COMBO","widget":{"name":"speaker"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"instruct","name":"instruct","shape":7,"type":"STRING","widget":{"name":"instruct"},"link":null},{"localized_name":"custom_speaker_name","name":"custom_speaker_name","shape":7,"type":"STRING","widget":{"name":"custom_speaker_name"},"link":26},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null}],"outputs":[{"localized_name":"AUDIO","name":"AUDIO","type":"AUDIO","links":[5]}],"properties":{"cnr_id":"comfyui-qwen3-tts","ver":"8692bfd8b930a7b5aca53754e63726e88ec94bd3","Node name for S&R":"Qwen3CustomVoice","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[" En este caso, a Pretti se le ve filmando la redada de los agentes federales, que se dedican a empujar a las personas que les graban y protestan, hasta que lo cogen, lo reducen y, cuando está inmovilizado en el suelo, lo disparan y rematan. Eran seis contra uno, y lo ejecutaron a bocajarro a las nueve de la mañana de este sábado, cuando aún resonaban en las calles de Minneapolis las voces que gritaban el viernes por la tarde contra el ICE, el autoritarismo de Trump y a favor de una ciudad y un estado definidos por su diversidad y, también, por ser un bastión demócrata.\n\nY Trump no soporta a quien le lleva la contraria, a quien no le vota, a quien escribe contra él o a quien le pone en evidencia, como el primer ministro de Canadá, Mark Carney, quien este sábado se ha llevado la amenaza de aranceles del 100% por negociar un acuerdo con China. ","Spanish","Vivian",662846073550596,"randomize","","lucia",1024]},{"id":6,"type":"PreviewAudio","pos":[1453.4296932156292,155.84823925756436],"size":[224.90572000000043,89.61051000000009],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","link":5},{"localized_name":"audioUI","name":"audioUI","type":"AUDIO_UI","widget":{"name":"audioUI"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.10.0","Node name for S&R":"PreviewAudio","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":21,"type":"Qwen3Loader","pos":[763.0788970074376,923.1893523379568],"size":[418.68961545454545,177.95799999999986],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"repo_id","name":"repo_id","type":"COMBO","widget":{"name":"repo_id"},"link":null},{"localized_name":"source","name":"source","type":"COMBO","widget":{"name":"source"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"local_model_path","name":"local_model_path","shape":7,"type":"STRING","widget":{"name":"local_model_path"},"link":33}],"outputs":[{"localized_name":"model","name":"model","type":"QWEN3_MODEL","links":[32]}],"properties":{"cnr_id":"comfyui-qwen3-tts","ver":"8692bfd8b930a7b5aca53754e63726e88ec94bd3","Node name for S&R":"Qwen3Loader","ue_properties":{"widget_ue_connectable":{"local_model_path":true},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["Qwen/Qwen3-TTS-12Hz-0.6B-CustomVoice","HuggingFace","bf16","auto",""]},{"id":11,"type":"PrimitiveString","pos":[367.02107129744644,912.5681519848373],"size":[374.68314999999996,122.42040000000009],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[33]}],"title":"Chekcpoint Path","properties":{"cnr_id":"comfy-core","ver":"0.10.0","Node name for S&R":"PrimitiveString","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"}},"widgets_values":["/home/rekuen/development/ComfyUI/output/qwen3-tts-finetune-carlos-spanish-0-6b-2-epochs/epoch_2/"]},{"id":22,"type":"Qwen3CustomVoice","pos":[765.4718488256187,1143.1015850652273],"size":[430.37324090909124,320.40551000000016],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"QWEN3_MODEL","link":32},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":39},{"localized_name":"language","name":"language","type":"COMBO","widget":{"name":"language"},"link":null},{"localized_name":"speaker","name":"speaker","type":"COMBO","widget":{"name":"speaker"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"instruct","name":"instruct","shape":7,"type":"STRING","widget":{"name":"instruct"},"link":null},{"localized_name":"custom_speaker_name","name":"custom_speaker_name","shape":7,"type":"STRING","widget":{"name":"custom_speaker_name"},"link":45},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null}],"outputs":[{"localized_name":"AUDIO","name":"AUDIO","type":"AUDIO","links":[37,42]}],"properties":{"cnr_id":"comfyui-qwen3-tts","ver":"8692bfd8b930a7b5aca53754e63726e88ec94bd3","Node name for S&R":"Qwen3CustomVoice","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[" En este caso, a Pretti se le ve filmando la redada de los agentes federales, que se dedican a empujar a las personas que les graban y protestan, hasta que lo cogen, lo reducen y, cuando está inmovilizado en el suelo, lo disparan y rematan. Eran seis contra uno, y lo ejecutaron a bocajarro a las nueve de la mañana de este sábado, cuando aún resonaban en las calles de Minneapolis las voces que gritaban el viernes por la tarde contra el ICE, el autoritarismo de Trump y a favor de una ciudad y un estado definidos por su diversidad y, también, por ser un bastión demócrata.\n\nY Trump no soporta a quien le lleva la contraria, a quien no le vota, a quien escribe contra él o a quien le pone en evidencia, como el primer ministro de Canadá, Mark Carney, quien este sábado se ha llevado la amenaza de aranceles del 100% por negociar un acuerdo con China. ","Spanish","Vivian",16258734193317,"randomize","","lucia",1024]},{"id":27,"type":"Qwen3AudioCompare","pos":[1207.8012415528908,1053.0545741561389],"size":[384.0133204541015,123.97836000000007],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"reference_audio","name":"reference_audio","type":"AUDIO","link":41},{"localized_name":"generated_audio","name":"generated_audio","type":"AUDIO","link":42},{"localized_name":"speaker_encoder_model","name":"speaker_encoder_model","type":"COMBO","widget":{"name":"speaker_encoder_model"},"link":null}],"outputs":[{"localized_name":"report","name":"report","type":"STRING","links":[44]}],"properties":{"cnr_id":"comfyui-qwen3-tts","ver":"ec1f01f473f6c9bb7514335ea400a888d68f0a9f","Node name for S&R":"Qwen3AudioCompare","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"}},"widgets_values":["Qwen/Qwen3-TTS-12Hz-0.6B-Base"]},{"id":26,"type":"Apply Whisper","pos":[377.2680038256189,1313.551096137959],"size":[368.494,146],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","link":40},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"language","name":"language","shape":7,"type":"COMBO","widget":{"name":"language"},"link":null},{"localized_name":"prompt","name":"prompt","shape":7,"type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"localized_name":"text","name":"text","type":"STRING","links":[39]},{"localized_name":"segments_alignment","name":"segments_alignment","type":"whisper_alignment","links":null},{"localized_name":"words_alignment","name":"words_alignment","type":"whisper_alignment","links":null}],"properties":{"cnr_id":"comfyui_fearnworksnodes","ver":"0.1.2","Node name for S&R":"Apply Whisper","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"}},"widgets_values":["medium","Spanish",""]},{"id":24,"type":"PreviewAudio","pos":[1210.4509972256196,919.7176414379561],"size":[376.2936600000003,88],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","link":37},{"localized_name":"audioUI","name":"audioUI","type":"AUDIO_UI","widget":{"name":"audioUI"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.10.0","Node name for S&R":"PreviewAudio","ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":25,"type":"VHS_LoadAudio","pos":[372.8832314256184,1080.9970804379568],"size":[375.2810417529297,181.61050999999998],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"audio_file","name":"audio_file","type":"STRING","widget":{"name":"audio_file"},"link":null},{"localized_name":"seek_seconds","name":"seek_seconds","shape":7,"type":"FLOAT","widget":{"name":"seek_seconds"},"link":null},{"localized_name":"duration","name":"duration","shape":7,"type":"FLOAT","widget":{"name":"duration"},"link":null}],"outputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","links":[40,41]},{"localized_name":"duration","name":"duration","type":"FLOAT","links":null}],"properties":{"cnr_id":"comfyui_fearnworksnodes","ver":"0.1.2","Node name for S&R":"VHS_LoadAudio","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"}},"widgets_values":{"audio_file":"datasets/qwen3tts_data_carlos/audio/utt_04371.wav","seek_seconds":0,"duration":0,"audiopreview":{"params":{"start_time":0,"duration":0,"filename":"datasets/qwen3tts_data_carlos/audio/utt_04371.wav","type":"path"}}}},{"id":14,"type":"Qwen3FineTune","pos":[685.4133095792644,152.0640847121091],"size":[320.56305389648446,581.82071],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"train_jsonl","name":"train_jsonl","type":"STRING","widget":{"name":"train_jsonl"},"link":22},{"localized_name":"init_model","name":"init_model","type":"COMBO","widget":{"name":"init_model"},"link":null},{"localized_name":"source","name":"source","type":"COMBO","widget":{"name":"source"},"link":null},{"localized_name":"output_dir","name":"output_dir","type":"STRING","widget":{"name":"output_dir"},"link":null},{"localized_name":"epochs","name":"epochs","type":"INT","widget":{"name":"epochs"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"lr","name":"lr","type":"FLOAT","widget":{"name":"lr"},"link":null},{"localized_name":"speaker_name","name":"speaker_name","type":"STRING","widget":{"name":"speaker_name"},"link":null},{"localized_name":"resume_training","name":"resume_training","shape":7,"type":"BOOLEAN","widget":{"name":"resume_training"},"link":null},{"localized_name":"keep_intermediate_checkpoints","name":"keep_intermediate_checkpoints","shape":7,"type":"BOOLEAN","widget":{"name":"keep_intermediate_checkpoints"},"link":null},{"localized_name":"mixed_precision","name":"mixed_precision","shape":7,"type":"COMBO","widget":{"name":"mixed_precision"},"link":null},{"localized_name":"gradient_accumulation","name":"gradient_accumulation","shape":7,"type":"INT","widget":{"name":"gradient_accumulation"},"link":null},{"localized_name":"gradient_checkpointing","name":"gradient_checkpointing","shape":7,"type":"BOOLEAN","widget":{"name":"gradient_checkpointing"},"link":null},{"localized_name":"use_8bit_optimizer","name":"use_8bit_optimizer","shape":7,"type":"BOOLEAN","widget":{"name":"use_8bit_optimizer"},"link":null},{"localized_name":"weight_decay","name":"weight_decay","shape":7,"type":"FLOAT","widget":{"name":"weight_decay"},"link":null},{"localized_name":"max_grad_norm","name":"max_grad_norm","shape":7,"type":"FLOAT","widget":{"name":"max_grad_norm"},"link":null},{"localized_name":"warmup_steps","name":"warmup_steps","shape":7,"type":"INT","widget":{"name":"warmup_steps"},"link":null},{"localized_name":"warmup_ratio","name":"warmup_ratio","shape":7,"type":"FLOAT","widget":{"name":"warmup_ratio"},"link":null}],"outputs":[{"localized_name":"model_path","name":"model_path","type":"STRING","links":[27]},{"localized_name":"custom_speaker_name","name":"custom_speaker_name","type":"STRING","links":[26,45]}],"properties":{"cnr_id":"comfyui-qwen3-tts","ver":"16a2df2166060aa32f515fc676477faf13f06e79","Node name for S&R":"Qwen3FineTune","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"}},"widgets_values":["","Qwen/Qwen3-TTS-12Hz-0.6B-Base","HuggingFace","/home/rekuen/development/ComfyUI/output/qwen3-tts-finetune-carlos-spanish-0-6b-2-epochs",2,2,5e-7,"carlos",false,false,"bf16",4,true,true,0.01,1,0,0]},{"id":28,"type":"PreviewAny","pos":[1206.8880674619804,1216.5462288652268],"size":[385.22643000000016,279.0699999999997],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":44}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.10.0","Node name for S&R":"PreviewAny","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"}},"widgets_values":[null,null,null]}],"links":[[4,4,0,5,0,"QWEN3_MODEL"],[5,5,0,6,0,"AUDIO"],[10,9,0,7,0,"STRING"],[22,7,0,14,0,"STRING"],[26,14,1,5,6,"STRING"],[27,14,0,4,4,"STRING"],[32,21,0,22,0,"QWEN3_MODEL"],[33,11,0,21,4,"STRING"],[37,22,0,24,0,"AUDIO"],[39,26,0,22,1,"STRING"],[40,25,0,26,0,"AUDIO"],[41,25,0,27,0,"AUDIO"],[42,22,0,27,1,"AUDIO"],[44,27,0,28,0,"STRING"],[45,14,1,22,6,"STRING"]],"groups":[{"id":1,"title":"Finetuning","bounding":[313.2943614256187,14.839460437956946,1537.9226799999992,793.4559299999996],"color":"#88A","font_size":24,"flags":{}},{"id":2,"title":"Test Chekpoint and Benchmark","bounding":[314.9048714256186,841.0310904379581,1534.1426399999996,665.8795799999999],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"workflowRendererVersion":"LG","ue_links":[],"ds":{"scale":0.6209213230591554,"offset":[356.38230730529074,-105.21883657159334]},"frontendVersion":"1.37.11","links_added_by_ue":[]},"version":0.4}